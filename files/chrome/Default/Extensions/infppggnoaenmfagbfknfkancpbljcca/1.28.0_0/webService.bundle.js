(()=>{var e={72378:(e,r,t)=>{e=t.nmd(e);var n="__lodash_hash_undefined__",s=9007199254740991,o="[object Arguments]",a="[object Function]",i="[object Object]",g=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,l={};l["[object Float32Array]"]=l["[object Float64Array]"]=l["[object Int8Array]"]=l["[object Int16Array]"]=l["[object Int32Array]"]=l["[object Uint8Array]"]=l["[object Uint8ClampedArray]"]=l["[object Uint16Array]"]=l["[object Uint32Array]"]=!0,l[o]=l["[object Array]"]=l["[object ArrayBuffer]"]=l["[object Boolean]"]=l["[object DataView]"]=l["[object Date]"]=l["[object Error]"]=l[a]=l["[object Map]"]=l["[object Number]"]=l[i]=l["[object RegExp]"]=l["[object Set]"]=l["[object String]"]=l["[object WeakMap]"]=!1;var m="object"==typeof t.g&&t.g&&t.g.Object===Object&&t.g,u="object"==typeof self&&self&&self.Object===Object&&self,A=m||u||Function("return this")(),d=r&&!r.nodeType&&r,f=d&&e&&!e.nodeType&&e,p=f&&f.exports===d,h=p&&m.process,b=function(){try{var e=f&&f.require&&f.require("util").types;return e||h&&h.binding&&h.binding("util")}catch(e){}}(),w=b&&b.isTypedArray;function v(e,r,t){switch(t.length){case 0:return e.call(r);case 1:return e.call(r,t[0]);case 2:return e.call(r,t[0],t[1]);case 3:return e.call(r,t[0],t[1],t[2])}return e.apply(r,t)}var x,y,_,k=Array.prototype,j=Function.prototype,E=Object.prototype,T=A["__core-js_shared__"],I=j.toString,C=E.hasOwnProperty,O=(x=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+x:"",B=E.toString,P=I.call(Object),S=RegExp("^"+I.call(C).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),D=p?A.Buffer:void 0,L=A.Symbol,$=A.Uint8Array,M=D?D.allocUnsafe:void 0,N=(y=Object.getPrototypeOf,_=Object,function(e){return y(_(e))}),z=Object.create,F=E.propertyIsEnumerable,U=k.splice,W=L?L.toStringTag:void 0,R=function(){try{var e=fe(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),V=D?D.isBuffer:void 0,q=Math.max,Z=Date.now,K=fe(A,"Map"),J=fe(Object,"create"),G=function(){function e(){}return function(r){if(!Te(r))return{};if(z)return z(r);e.prototype=r;var t=new e;return e.prototype=void 0,t}}();function H(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function Q(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function X(e){var r=-1,t=null==e?0:e.length;for(this.clear();++r<t;){var n=e[r];this.set(n[0],n[1])}}function Y(e){var r=this.__data__=new Q(e);this.size=r.size}function ee(e,r){var t=ye(e),n=!t&&xe(e),s=!t&&!n&&ke(e),o=!t&&!n&&!s&&Ce(e),a=t||n||s||o,i=a?function(e,r){for(var t=-1,n=Array(e);++t<e;)n[t]=r(t);return n}(e.length,String):[],g=i.length;for(var c in e)!r&&!C.call(e,c)||a&&("length"==c||s&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||pe(c,g))||i.push(c);return i}function re(e,r,t){(void 0!==t&&!ve(e[r],t)||void 0===t&&!(r in e))&&se(e,r,t)}function te(e,r,t){var n=e[r];C.call(e,r)&&ve(n,t)&&(void 0!==t||r in e)||se(e,r,t)}function ne(e,r){for(var t=e.length;t--;)if(ve(e[t][0],r))return t;return-1}function se(e,r,t){"__proto__"==r&&R?R(e,r,{configurable:!0,enumerable:!0,value:t,writable:!0}):e[r]=t}H.prototype.clear=function(){this.__data__=J?J(null):{},this.size=0},H.prototype.delete=function(e){var r=this.has(e)&&delete this.__data__[e];return this.size-=r?1:0,r},H.prototype.get=function(e){var r=this.__data__;if(J){var t=r[e];return t===n?void 0:t}return C.call(r,e)?r[e]:void 0},H.prototype.has=function(e){var r=this.__data__;return J?void 0!==r[e]:C.call(r,e)},H.prototype.set=function(e,r){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=J&&void 0===r?n:r,this},Q.prototype.clear=function(){this.__data__=[],this.size=0},Q.prototype.delete=function(e){var r=this.__data__,t=ne(r,e);return!(t<0)&&(t==r.length-1?r.pop():U.call(r,t,1),--this.size,!0)},Q.prototype.get=function(e){var r=this.__data__,t=ne(r,e);return t<0?void 0:r[t][1]},Q.prototype.has=function(e){return ne(this.__data__,e)>-1},Q.prototype.set=function(e,r){var t=this.__data__,n=ne(t,e);return n<0?(++this.size,t.push([e,r])):t[n][1]=r,this},X.prototype.clear=function(){this.size=0,this.__data__={hash:new H,map:new(K||Q),string:new H}},X.prototype.delete=function(e){var r=de(this,e).delete(e);return this.size-=r?1:0,r},X.prototype.get=function(e){return de(this,e).get(e)},X.prototype.has=function(e){return de(this,e).has(e)},X.prototype.set=function(e,r){var t=de(this,e),n=t.size;return t.set(e,r),this.size+=t.size==n?0:1,this},Y.prototype.clear=function(){this.__data__=new Q,this.size=0},Y.prototype.delete=function(e){var r=this.__data__,t=r.delete(e);return this.size=r.size,t},Y.prototype.get=function(e){return this.__data__.get(e)},Y.prototype.has=function(e){return this.__data__.has(e)},Y.prototype.set=function(e,r){var t=this.__data__;if(t instanceof Q){var n=t.__data__;if(!K||n.length<199)return n.push([e,r]),this.size=++t.size,this;t=this.__data__=new X(n)}return t.set(e,r),this.size=t.size,this};var oe,ae=function(e,r,t){for(var n=-1,s=Object(e),o=t(e),a=o.length;a--;){var i=o[oe?a:++n];if(!1===r(s[i],i,s))break}return e};function ie(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":W&&W in Object(e)?function(e){var r=C.call(e,W),t=e[W];try{e[W]=void 0;var n=!0}catch(e){}var s=B.call(e);n&&(r?e[W]=t:delete e[W]);return s}(e):function(e){return B.call(e)}(e)}function ge(e){return Ie(e)&&ie(e)==o}function ce(e){return!(!Te(e)||function(e){return!!O&&O in e}(e))&&(je(e)?S:g).test(function(e){if(null!=e){try{return I.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e))}function le(e){if(!Te(e))return function(e){var r=[];if(null!=e)for(var t in Object(e))r.push(t);return r}(e);var r=he(e),t=[];for(var n in e)("constructor"!=n||!r&&C.call(e,n))&&t.push(n);return t}function me(e,r,t,n,s){e!==r&&ae(r,(function(o,a){if(s||(s=new Y),Te(o))!function(e,r,t,n,s,o,a){var g=be(e,t),c=be(r,t),l=a.get(c);if(l)return void re(e,t,l);var m=o?o(g,c,t+"",e,r,a):void 0,u=void 0===m;if(u){var A=ye(c),d=!A&&ke(c),f=!A&&!d&&Ce(c);m=c,A||d||f?ye(g)?m=g:Ie(v=g)&&_e(v)?m=function(e,r){var t=-1,n=e.length;r||(r=Array(n));for(;++t<n;)r[t]=e[t];return r}(g):d?(u=!1,m=function(e,r){if(r)return e.slice();var t=e.length,n=M?M(t):new e.constructor(t);return e.copy(n),n}(c,!0)):f?(u=!1,p=c,h=!0?(b=p.buffer,w=new b.constructor(b.byteLength),new $(w).set(new $(b)),w):p.buffer,m=new p.constructor(h,p.byteOffset,p.length)):m=[]:function(e){if(!Ie(e)||ie(e)!=i)return!1;var r=N(e);if(null===r)return!0;var t=C.call(r,"constructor")&&r.constructor;return"function"==typeof t&&t instanceof t&&I.call(t)==P}(c)||xe(c)?(m=g,xe(g)?m=function(e){return function(e,r,t,n){var s=!t;t||(t={});var o=-1,a=r.length;for(;++o<a;){var i=r[o],g=n?n(t[i],e[i],i,t,e):void 0;void 0===g&&(g=e[i]),s?se(t,i,g):te(t,i,g)}return t}(e,Oe(e))}(g):Te(g)&&!je(g)||(m=function(e){return"function"!=typeof e.constructor||he(e)?{}:G(N(e))}(c))):u=!1}var p,h,b,w;var v;u&&(a.set(c,m),s(m,c,n,o,a),a.delete(c));re(e,t,m)}(e,r,a,t,me,n,s);else{var g=n?n(be(e,a),o,a+"",e,r,s):void 0;void 0===g&&(g=o),re(e,a,g)}}),Oe)}function ue(e,r){return we(function(e,r,t){return r=q(void 0===r?e.length-1:r,0),function(){for(var n=arguments,s=-1,o=q(n.length-r,0),a=Array(o);++s<o;)a[s]=n[r+s];s=-1;for(var i=Array(r+1);++s<r;)i[s]=n[s];return i[r]=t(a),v(e,this,i)}}(e,r,Se),e+"")}var Ae=R?function(e,r){return R(e,"toString",{configurable:!0,enumerable:!1,value:(t=r,function(){return t}),writable:!0});var t}:Se;function de(e,r){var t,n,s=e.__data__;return("string"==(n=typeof(t=r))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==t:null===t)?s["string"==typeof r?"string":"hash"]:s.map}function fe(e,r){var t=function(e,r){return null==e?void 0:e[r]}(e,r);return ce(t)?t:void 0}function pe(e,r){var t=typeof e;return!!(r=null==r?s:r)&&("number"==t||"symbol"!=t&&c.test(e))&&e>-1&&e%1==0&&e<r}function he(e){var r=e&&e.constructor;return e===("function"==typeof r&&r.prototype||E)}function be(e,r){if(("constructor"!==r||"function"!=typeof e[r])&&"__proto__"!=r)return e[r]}var we=function(e){var r=0,t=0;return function(){var n=Z(),s=16-(n-t);if(t=n,s>0){if(++r>=800)return arguments[0]}else r=0;return e.apply(void 0,arguments)}}(Ae);function ve(e,r){return e===r||e!=e&&r!=r}var xe=ge(function(){return arguments}())?ge:function(e){return Ie(e)&&C.call(e,"callee")&&!F.call(e,"callee")},ye=Array.isArray;function _e(e){return null!=e&&Ee(e.length)&&!je(e)}var ke=V||function(){return!1};function je(e){if(!Te(e))return!1;var r=ie(e);return r==a||"[object GeneratorFunction]"==r||"[object AsyncFunction]"==r||"[object Proxy]"==r}function Ee(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=s}function Te(e){var r=typeof e;return null!=e&&("object"==r||"function"==r)}function Ie(e){return null!=e&&"object"==typeof e}var Ce=w?function(e){return function(r){return e(r)}}(w):function(e){return Ie(e)&&Ee(e.length)&&!!l[ie(e)]};function Oe(e){return _e(e)?ee(e,!0):le(e)}var Be,Pe=(Be=function(e,r,t){me(e,r,t)},ue((function(e,r){var t=-1,n=r.length,s=n>1?r[n-1]:void 0,o=n>2?r[2]:void 0;for(s=Be.length>3&&"function"==typeof s?(n--,s):void 0,o&&function(e,r,t){if(!Te(t))return!1;var n=typeof r;return!!("number"==n?_e(t)&&pe(r,t.length):"string"==n&&r in t)&&ve(t[r],e)}(r[0],r[1],o)&&(s=n<3?void 0:s,n=1),e=Object(e);++t<n;){var a=r[t];a&&Be(e,a,t,s)}return e})));function Se(e){return e}e.exports=Pe},93150:function(e,r){var t,n,s;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[e],t=function(e){"use strict";if(!globalThis.chrome?.runtime?.id)throw new Error("This script should only be loaded in a browser extension.");if(void 0===globalThis.browser||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const r="The message port closed before a response was received.",t=e=>{const t={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(t).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class n extends WeakMap{constructor(e,r){super(r),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const s=e=>e&&"object"==typeof e&&"function"==typeof e.then,o=(r,t)=>(...n)=>{e.runtime.lastError?r.reject(new Error(e.runtime.lastError.message)):t.singleCallbackArg||n.length<=1&&!1!==t.singleCallbackArg?r.resolve(n[0]):r.resolve(n)},a=e=>1==e?"argument":"arguments",i=(e,r)=>function(t,...n){if(n.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${a(r.minArgs)} for ${e}(), got ${n.length}`);if(n.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${a(r.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((s,a)=>{if(r.fallbackToNoCallback)try{t[e](...n,o({resolve:s,reject:a},r))}catch(o){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,o),t[e](...n),r.fallbackToNoCallback=!1,r.noCallback=!0,s()}else r.noCallback?(t[e](...n),s()):t[e](...n,o({resolve:s,reject:a},r))}))},g=(e,r,t)=>new Proxy(r,{apply:(r,n,s)=>t.call(n,e,...s)});let c=Function.call.bind(Object.prototype.hasOwnProperty);const l=(e,r={},t={})=>{let n=Object.create(null),s={has:(r,t)=>t in e||t in n,get(s,o,a){if(o in n)return n[o];if(!(o in e))return;let m=e[o];if("function"==typeof m)if("function"==typeof r[o])m=g(e,e[o],r[o]);else if(c(t,o)){let r=i(o,t[o]);m=g(e,e[o],r)}else m=m.bind(e);else if("object"==typeof m&&null!==m&&(c(r,o)||c(t,o)))m=l(m,r[o],t[o]);else{if(!c(t,"*"))return Object.defineProperty(n,o,{configurable:!0,enumerable:!0,get:()=>e[o],set(r){e[o]=r}}),m;m=l(m,r[o],t["*"])}return n[o]=m,m},set:(r,t,s,o)=>(t in n?n[t]=s:e[t]=s,!0),defineProperty:(e,r,t)=>Reflect.defineProperty(n,r,t),deleteProperty:(e,r)=>Reflect.deleteProperty(n,r)},o=Object.create(e);return new Proxy(o,s)},m=e=>({addListener(r,t,...n){r.addListener(e.get(t),...n)},hasListener:(r,t)=>r.hasListener(e.get(t)),removeListener(r,t){r.removeListener(e.get(t))}}),u=new n((e=>"function"!=typeof e?e:function(r){const t=l(r,{},{getContent:{minArgs:0,maxArgs:0}});e(t)})),A=new n((e=>"function"!=typeof e?e:function(r,t,n){let o,a,i=!1,g=new Promise((e=>{o=function(r){i=!0,e(r)}}));try{a=e(r,t,o)}catch(e){a=Promise.reject(e)}const c=!0!==a&&s(a);if(!0!==a&&!c&&!i)return!1;const l=e=>{e.then((e=>{n(e)}),(e=>{let r;r=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",n({__mozWebExtensionPolyfillReject__:!0,message:r})})).catch((e=>{console.error("Failed to send onMessage rejected reply",e)}))};return l(c?a:g),!0})),d=({reject:t,resolve:n},s)=>{e.runtime.lastError?e.runtime.lastError.message===r?n():t(new Error(e.runtime.lastError.message)):s&&s.__mozWebExtensionPolyfillReject__?t(new Error(s.message)):n(s)},f=(e,r,t,...n)=>{if(n.length<r.minArgs)throw new Error(`Expected at least ${r.minArgs} ${a(r.minArgs)} for ${e}(), got ${n.length}`);if(n.length>r.maxArgs)throw new Error(`Expected at most ${r.maxArgs} ${a(r.maxArgs)} for ${e}(), got ${n.length}`);return new Promise(((e,r)=>{const s=d.bind(null,{resolve:e,reject:r});n.push(s),t.sendMessage(...n)}))},p={devtools:{network:{onRequestFinished:m(u)}},runtime:{onMessage:m(A),onMessageExternal:m(A),sendMessage:f.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:f.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},h={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return t.privacy={network:{"*":h},services:{"*":h},websites:{"*":h}},l(e,p,t)};e.exports=t(chrome)}else e.exports=globalThis.browser},void 0===(s="function"==typeof t?t.apply(r,n):t)||(e.exports=s)}},r={};function t(n){var s=r[n];if(void 0!==s)return s.exports;var o=r[n]={id:n,loaded:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.loaded=!0,o.exports}t.n=e=>{var r=e&&e.__esModule?()=>e.default:()=>e;return t.d(r,{a:r}),r},t.d=(e,r)=>{for(var n in r)t.o(r,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:r[n]})},t.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),t.o=(e,r)=>Object.prototype.hasOwnProperty.call(e,r),t.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{"use strict";let e,r;const n=new WeakMap,s=new WeakMap,o=new WeakMap,a=new WeakMap,i=new WeakMap;let g={get(e,r,t){if(e instanceof IDBTransaction){if("done"===r)return s.get(e);if("objectStoreNames"===r)return e.objectStoreNames||o.get(e);if("store"===r)return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return m(e[r])},set:(e,r,t)=>(e[r]=t,!0),has:(e,r)=>e instanceof IDBTransaction&&("done"===r||"store"===r)||r in e};function c(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(r||(r=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(...r){return e.apply(u(this),r),m(n.get(this))}:function(...r){return m(e.apply(u(this),r))}:function(r,...t){const n=e.call(u(this),r,...t);return o.set(n,r.sort?r.sort():[r]),m(n)}}function l(r){return"function"==typeof r?c(r):(r instanceof IDBTransaction&&function(e){if(s.has(e))return;const r=new Promise(((r,t)=>{const n=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{r(),n()},o=()=>{t(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)}));s.set(e,r)}(r),t=r,(e||(e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(r,g):r);var t}function m(e){if(e instanceof IDBRequest)return function(e){const r=new Promise(((r,t)=>{const n=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{r(m(e.result)),n()},o=()=>{t(e.error),n()};e.addEventListener("success",s),e.addEventListener("error",o)}));return r.then((r=>{r instanceof IDBCursor&&n.set(r,e)})).catch((()=>{})),i.set(r,e),r}(e);if(a.has(e))return a.get(e);const r=l(e);return r!==e&&(a.set(e,r),i.set(r,e)),r}const u=e=>i.get(e);const A=["get","getKey","getAll","getAllKeys","count"],d=["put","add","delete","clear"],f=new Map;function p(e,r){if(!(e instanceof IDBDatabase)||r in e||"string"!=typeof r)return;if(f.get(r))return f.get(r);const t=r.replace(/FromIndex$/,""),n=r!==t,s=d.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!s&&!A.includes(t))return;const o=async function(e,...r){const o=this.transaction(e,s?"readwrite":"readonly");let a=o.store;return n&&(a=a.index(r.shift())),(await Promise.all([a[t](...r),s&&o.done]))[0]};return f.set(r,o),o}g=(e=>({...e,get:(r,t,n)=>p(r,t)||e.get(r,t,n),has:(r,t)=>!!p(r,t)||e.has(r,t)}))(g);var h=t(93150),b=t.n(h),w=t(72378),v=t.n(w);function x(e,r){try{return JSON.parse(e)}catch(e){return r}}const y=(e,r)=>e?`${e}--${r}`:r;function _(e="",r={},t=""){let n={name:y(t,e),data:r};return b().runtime.sendMessage(n)}function k(){const e={};return window.addEventListener("__automa-ext__",(({detail:r})=>{var t,n;r&&(t=e,n=r.type,Object.prototype.hasOwnProperty.call(t,n))&&e[r.type].forEach((e=>{e(r.data)}))})),{on:function(r,t){(e[r]=e[r]||[]).push(t)}}}function j(e,r={}){const t=new CustomEvent(`__automa-ext__${e}`,{detail:r});window.dispatchEvent(t)}window.addEventListener("DOMContentLoaded",(async()=>{try{document.body.setAttribute("data-atm-ext-installed",b().runtime.getManifest().version);const{workflows:e}=await b().storage.local.get("workflows"),r=await function(e,r,{blocked:t,upgrade:n,blocking:s,terminated:o}={}){const a=indexedDB.open(e,r),i=m(a);return n&&a.addEventListener("upgradeneeded",(e=>{n(m(a.result),e.oldVersion,e.newVersion,m(a.transaction),e)})),t&&a.addEventListener("blocked",(e=>t(e.oldVersion,e.newVersion,e))),i.then((e=>{o&&e.addEventListener("close",(()=>o())),s&&e.addEventListener("versionchange",(e=>s(e.oldVersion,e.newVersion,e)))})).catch((()=>{})),i}("automa",1,{upgrade(e){e.createObjectStore("store")}});await r.put("store",e,"workflows");const t=k();t.on("open-dashboard",(({path:e})=>{e&&_("open:dashboard",e,"background")})),t.on("open-workflow",(({workflowId:e})=>{e&&_("open:dashboard",`/workflows/${e}`,"background")})),t.on("add-workflow",(async({workflow:e})=>{try{const{workflows:r}=await b().storage.local.get("workflows"),t=((e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,r)=>e+((r&=63)<36?r.toString(36):r<62?(r-26).toString(36).toUpperCase():r>62?"-":"_")),""))(),n={...e,id:t,dataColumns:[],createdAt:Date.now(),table:e.table||e.dataColumns};n.drawflow="string"==typeof n.drawflow?x(n.drawflow,n.drawflow):n.drawflow,Array.isArray(r)?r.push(n):r[t]=n,await b().storage.local.set({workflows:r}),_("workflow:added",{workflowId:t,workflowData:n},"background")}catch(e){console.error(e)}})),t.on("add-team-workflow",(async({workflow:e})=>{let{teamWorkflows:r}=await b().storage.local.get("teamWorkflows"),t={...e,createdAt:Date.now(),table:e.table??[]};t.drawflow="string"==typeof t.drawflow?x(t.drawflow,t.drawflow):t.drawflow,r||(r={}),r[t.teamId]||(r[t.teamId]={});const n=r[t.teamId][e.id]||null;n&&(t=v()(n,t)),r[t.teamId][e.id]=t,await b().storage.local.set({teamWorkflows:r});const s=t.drawflow.nodes?.find((e=>"trigger"===e.label));s&&await _("workflow:register",{triggerBlock:s,workflowId:t.id},"background"),_("workflow:added",{workflowId:t.id,teamId:t.teamId,source:"team"},"background")})),t.on("check-team-workflow",(async({teamId:e,workflowId:r})=>{const{teamWorkflows:t}=await b().storage.local.get("teamWorkflows"),n=Boolean(t?.[e]?.[r]);window.dispatchEvent(new CustomEvent("__automa-team-workflow__",{detail:{exists:n}}))})),t.on("add-package",(async e=>{try{const{savedBlocks:r}=await b().storage.local.get("savedBlocks"),t=r||[];t.push({...e.package,createdAt:Date.now()}),await b().storage.local.set({savedBlocks:t}),_("dashboard:refresh-packages","","background")}catch(e){console.error(e)}})),t.on("update-package",(async e=>{const{savedBlocks:r}=await b().storage.local.get("savedBlocks"),t=r||[],n=t.findIndex((r=>r.id===e.id));-1!==n&&(Object.assign(t[n],e.package),await b().storage.local.set({savedBlocks:t}),_("dashboard:refresh-packages","","background"))})),t.on("send-message",(async({type:e,data:r})=>{if("package-installed"===e){const{savedBlocks:t}=await b().storage.local.get("savedBlocks");j(e,(t||[]).some((e=>e.id===r)))}else if("get-workflows"===e){j(e,(await b().storage.local.get("workflows")).workflows)}}))}catch(e){console.error(e)}})),window.addEventListener("user-logout",(()=>{b().storage.local.remove(["session","sessionToken"])})),window.addEventListener("app-mounted",(async()=>{try{const e="supabase.auth.token",r=x(localStorage.getItem(e),null),t=await b().storage.local.get(["session","sessionToken"]),n=async()=>{const e={session:r},t=r?.user?.user_metadata?.iss.includes("googleapis.com"),{session:n,sessionToken:s}=await b().storage.local.get(["session","sessionToken"]);t&&(r&&r.user.id===n?.user.id||!s)&&(e.sessionToken={access:r.provider_token,refresh:r.provider_refresh_token}),t||b().storage.local.remove("sessionToken"),await b().storage.local.set(e)};if(r&&!t.session)await n();else if(r&&t.session)if(r.user.id!==t.session.id)await n();else{const r={...t.session};t.sessionToken&&(r.provider_token=t.sessionToken.access,r.provider_refresh_token=t.sessionToken.refresh),localStorage.setItem(e,JSON.stringify(r))}}catch(e){console.error(e)}}))})()})();